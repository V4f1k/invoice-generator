# Story 3.1: Simple Dashboard Display

## Status
- Draft

## Story
**As a** logged-in user,
**I want** to see a simple dashboard with key financial metrics when I log in,
**so that** I can get an immediate overview of my business activity.

## Acceptance Criteria
1. The default page after login is a dashboard.
2. The dashboard displays the total invoiced amount (for the current year).
3. The dashboard displays a summary of amounts invoiced per project.
4. The data presented is accurate and updates in near real-time.

## Tasks / Subtasks
- [ ] **Task 1: Implement Dashboard API Endpoint (AC: #2, #3, #4)**
  - [ ] Subtask 1.1: Create a `GET /api/v1/dashboard/summary` endpoint, protected by authentication.
  - [ ] Subtask 1.2: The endpoint should calculate the total invoiced amount for the authenticated supplier for the current calendar year.
  - [ ] Subtask 1.3: The endpoint should calculate the sum of totals for all invoices, grouped by project.
  - [ ] Subtask 1.4: The endpoint should return these two key metrics in a single, efficient response.
- [ ] **Task 2: Create Frontend Dashboard Page (AC: #1, #2, #3)**
  - [ ] Subtask 2.1: Create a new page at the `/dashboard` route (or use the application root `/` as the dashboard).
  - [ ] Subtask 2.2: Configure the application to redirect users to this page after a successful login.
  - [ ] Subtask 2.3: Fetch data from the `GET /api/v1/dashboard/summary` endpoint when the page loads.
  - [ ] Subtask 2.4: Display the total invoiced amount in a clear, prominent "Stat Card" component using ShadCN components.
  - [ ] Subtask 2.5: Display the per-project summary in a simple table or a basic bar chart.

## Dev Notes
- **i18n**: This story involves UI changes. Ensure all static text is implemented using the internationalization framework as per Story 4.1.
- **Performance**: The dashboard queries could become slow as the number of invoices grows. Ensure the queries are optimized with proper indexing on the `invoices` table (e.g., on `supplier_id`, `issue_date`, and `project_id`).
- **Edge Cases**: The per-project summary should gracefully handle invoices that are not linked to any project, perhaps by grouping them under an "Unassigned" or "No Project" category.

### Testing
- An integration test for the `/dashboard/summary` endpoint is critical. The test should seed the database with a variety of invoices (different dates, different projects, no project) and verify the calculations are accurate.
- Frontend component tests should be written for the dashboard display components (the stat card and the project summary table/chart).
- An E2E test should verify the entire flow: a user logs in, lands on the dashboard, and sees the correct data displayed.

## Change Log
| Date       | Version | Description                | Author |
| :--------- | :------ | :------------------------- | :----- |
| 2025-08-29 | 1.0     | Initial draft              | Sarah  |

---
## Dev Agent Record
*(This section is to be filled out by the Dev Agent during implementation)*

#### Agent Model Used

#### Debug Log References

#### Completion Notes List

#### File List

---
## QA Results
*(This section is to be filled out by the QA Agent after development)*
