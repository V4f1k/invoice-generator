# Story 1.10: Generování variabilního symbolu pro faktury

## Status
- Was done by another story

## Epic
- Epic 1: Foundational Setup & Core Invoicing

## Story
**Jako** uživatel,
**chci**, aby se pro každou fakturu automaticky generoval variabilní symbol,
**aby** moji klienti mohli snadno identifikovat platby.

## Akceptační kritéria
1. Pro každou novou fakturu je automaticky vygenerován "Variabilní symbol".
2. Ve výchozím stavu se variabilní symbol shoduje s číslem faktury (hodnotou `RRMMDDXXXXX`).
3. Variabilní symbol je zobrazen na stránce s detailem faktury.
4. Variabilní symbol je zahrnut v datech pro generování SPAYD QR kódu.
5. Variabilní symbol je zobrazen na vygenerovaném PDF dokumentu.

## Úkoly / Podúkoly
- [ ] **Úkol 1: Úprava databáze a backendu (AC: #1, #2, #4)**
  - [ ] Podúkol 1.1: Aktualizovat schéma tabulky `invoices` a přidat sloupec `variable_symbol`.
  - [ ] Podúkol 1.2: Upravit logiku pro vytváření faktury (v rámci Story 1.5) tak, aby se při ukládání nové faktury rovnou generoval a ukládal i variabilní symbol.
  - [ ] Podúkol 1.3: Upravit utilitu pro generování SPAYD QR kódu (z Story 1.6) tak, aby do něj zahrnula i variabilní symbol.
- [ ] **Úkol 2: Úprava frontendu a PDF šablony (AC: #3, #5)**
  - [ ] Podúkol 2.1: Upravit stránku s detailem faktury (`/invoices/[id]`) tak, aby zobrazovala variabilní symbol.
  - [ ] Podúkol 2.2: Upravit PDF šablonu (`InvoicePDFTemplate.tsx`) tak, aby na viditelném místě zobrazovala variabilní symbol.

## Poznámky pro vývojáře
- Tento úkol rozšiřuje existující logiku tvorby faktur (Story 1.5) a generování PDF (Story 1.6).
- Je důležité zajistit, aby byl variabilní symbol správně předán do všech relevantních částí systému (API, QR kód, PDF).

### Testování
- Je třeba aktualizovat testy pro tvorbu faktury a ověřit, že se variabilní symbol správně ukládá.
- Je třeba aktualizovat testy pro generování QR kódu.
- Je nutné manuálně zkontrolovat detail faktury a vygenerované PDF, aby se ověřilo správné zobrazení variabilního symbolu.

## Change Log
| Datum       | Verze | Popis                | Autor |
| :--------- | :------ | :------------------------- | :----- |
| 2025-08-29 | 1.0     | Počáteční návrh            | Sarah  |
