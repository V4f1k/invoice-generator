# Story 1.8: Nastavení výchozí splatnosti na 14 dní

## Status
- Ready for Review


## Story
**Jako** uživatel,
**chci**, aby výchozí datum splatnosti na nové faktuře bylo automaticky nastaveno na 14 dní od data vystavení,
**abych** nemusel toto datum pokaždé ručně počítat a zadávat.

## Akceptační kritéria
1. Při vytváření nové faktury je pole "Datum splatnosti" automaticky vyplněno datem, které je 14 dní po "Datumu vystavení".
2. Pokud uživatel změní "Datum vystavení", "Datum splatnosti" se automaticky přepočítá na 14 dní po novém datu vystavení.
3. Uživatel může stále ručně přepsat automaticky vypočítané datum splatnosti.

## Úkoly / Podúkoly
- [x] **Úkol 1: Úprava frontendu formuláře pro tvorbu faktury (AC: #1, #2, #3)**
  - [x] Podúkol 1.1: Upravit komponentu formuláře pro tvorbu faktury.
  - [x] Podúkol 1.2: Implementovat logiku, která bude sledovat změnu v poli "Datum vystavení" a automaticky nastavovat hodnotu pole "Datum splatnosti" s přičtením 14 dnů.
  - [x] Podúkol 1.3: Zajistit, aby pole "Datum splatnosti" zůstalo uživatelsky editovatelné pro případné manuální úpravy.

## Poznámky pro vývojáře
- **i18n**: Tento úkol zahrnuje změny v UI. Ujistěte se, že veškerý statický text je implementován pomocí internacionalizačního frameworku dle Story 4.1.
- Jedná se o relativně malou změnu na frontendu, která by měla vylepšit uživatelský komfort.

### Testování
- Je třeba otestovat, že se datum splatnosti správně předvyplní při otevření formuláře.
- Je třeba otestovat, že se datum splatnosti správně přepočítá po změně data vystavení.
- Je třeba otestovat, že manuální změna data splatnosti je stále možná.

## Change Log
| Datum       | Verze | Popis                | Autor |
| :--------- | :------ | :------------------------- | :----- |
| 2025-08-29 | 1.0     | Počáteční návrh            | Sarah  |

---
## Dev Agent Record

#### Agent Model Used
Claude Sonnet 4 (claude-sonnet-4-20250514)

#### Debug Log References
- Build validation: ✅ Successful compilation with only warnings
- Linting validation: ✅ Code quality checks passed
- Manual testing needed: Browser testing for date functionality

#### Completion Notes List
- ✅ Updated default due date from 30 days to 14 days
- ✅ Implemented auto-calculation helper function `calculateDueDate()`
- ✅ Added useEffect hook to watch issue date changes
- ✅ Preserved manual editability with smart logic
- ✅ Added comprehensive test suite for 14-day functionality
- ✅ Cleaned up unused imports for code quality

#### File List
- Modified: `apps/web/app/components/invoice/InvoiceCreationModal.tsx` - Main implementation
- Modified: `apps/web/app/components/invoice/__tests__/InvoiceCreationModal.test.tsx` - Test updates and new tests

---
## QA Results
*(This section is to be filled out by the QA Agent after development)*
