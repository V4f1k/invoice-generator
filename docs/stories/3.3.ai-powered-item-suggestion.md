# Story 3.3: AI-Powered Item Suggestion

## Status
- Draft

## Story
**As a** logged-in user,
**I want** to be shown a list of suggested items when creating an invoice for a repeat customer,
**so that** I can add common items with a single click instead of re-typing them.

## Acceptance Criteria
1. When a saved customer is selected on the invoice form, the new suggestion service is called.
2. A list of suggested items is displayed clearly but unobtrusively.
3. Clicking a suggestion adds it as a new line item to the invoice.
4. The feature does not block or slow down the user's ability to enter items manually.
5. If there are no suggestions, nothing is shown.

## Tasks / Subtasks
- [ ] **Task 1: Update Frontend Invoice Editor (AC: #1, #2, #3, #4, #5)**
  - [ ] Subtask 1.1: Modify the invoice editor component.
  - [ ] Subtask 1.2: Add a `useEffect` hook that triggers when the selected `customerId` changes.
  - [ ] Subtask 1.3: Inside the hook, call the `GET /api/v1/suggestions/invoice-items` endpoint created in Story 3.2.
  - [ ] Subtask 1.4: Display the returned suggestions in a clean, unobtrusive list or as a set of clickable tags/badges near the "Add Line Item" button.
  - [ ] Subtask 1.5: Implement the logic so that clicking a suggestion appends a new line item to the form with the suggested description.
  - [ ] Subtask 1.6: Ensure the suggestion list is hidden if the API returns an empty list or while the data is loading.

## Dev Notes
- **i18n**: This story involves UI changes. Ensure all static text is implemented using the internationalization framework as per Story 4.1.
- The user experience for this feature is key. The suggestions should appear quickly and be easy to use without getting in the way of the manual workflow. The front-end spec requires the feature to be unobtrusive.
- Consider adding a subtle loading indicator (e.g., a spinner) while the suggestions are being fetched to provide feedback to the user.

### Testing
- Component tests for the updated invoice editor are needed.
- Mock the suggestion API to test the different UI states: loading, displaying suggestions, and handling an empty list of suggestions.
- Verify that clicking a suggestion correctly adds a new line item to the form state.
- An E2E test should cover the full flow: selecting a customer with a known invoice history, verifying the suggestions appear, clicking a suggestion, and confirming the line item is added correctly to the invoice form.

## Change Log
| Date       | Version | Description                | Author |
| :--------- | :------ | :------------------------- | :----- |
| 2025-08-29 | 1.0     | Initial draft              | Sarah  |

---
## Dev Agent Record
*(This section is to be filled out by the Dev Agent during implementation)*

#### Agent Model Used

#### Debug Log References

#### Completion Notes List

#### File List

---
## QA Results
*(This section is to be filled out by the QA Agent after development)*
