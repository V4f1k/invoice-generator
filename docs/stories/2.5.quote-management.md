# Story 2.5: Quote Creation and Management

## Status
- Draft

## Story
**As a** logged-in user,
**I want** to create, save, view, and download a PDF for a Quote,
**so that** I can send professional offers to potential clients.

## Acceptance Criteria
1. A "Quotes" section is added to the application.
2. The quote creation form and workflow are identical to the invoice workflow, but use a distinct numbering scheme (e.g., "Q-2025001").
3. Quotes are saved and managed separately from invoices.
4. Quotes can be downloaded as a standards-compliant PDF.

## Tasks / Subtasks
- [ ] **Task 1: Create Quote Database Tables (AC: #3)**
  - [ ] Subtask 1.1: Create `quotes` and `quote_items` tables, mirroring the exact structure of the `invoices` and `invoice_items` tables.
  - [ ] Subtask 1.2: Implement and apply the database migrations.
- [ ] **Task 2: Implement Quote API Endpoints (AC: #2, #3, #4)**
  - [ ] Subtask 2.1: Implement full CRUD endpoints for quotes (`GET /api/v1/quotes`, `POST /api/v1/quotes`, `GET /api/v1/quotes/{id}`, `PUT /api/v1/quotes/{id}`, `DELETE /api/v1/quotes/{id}`).
  - [ ] Subtask 2.2: Implement logic for a unique, sequential quote number (e.g., prefixed with "Q-"), which is managed separately from invoice numbers.
  - [ ] Subtask 2.3: Implement a `GET /api/v1/quotes/{id}/pdf` endpoint for downloading the quote PDF.
- [ ] **Task 3: Create Frontend Quote Management UI (AC: #1, #2, #4)**
  - [ ] Subtask 3.1: Add a "Quotes" section to the main navigation.
  - [ ] Subtask 3.2: Create a new page at `/quotes` to list all quotes, reusing the invoice list component.
  - [ ] Subtask 3.3: Reuse the invoice editor component to create a quote editor form, passing props to adjust labels (e.g., "New Quote" instead of "New Invoice").
  - [ ] Subtask 3.4: Create a quote view page at `/quotes/[id]`, reusing the invoice view component.
  - [ ] Subtask 3.5: Add a "Download PDF" button to the quote view page.

## Dev Notes
- **i18n**: This story involves UI changes. Ensure all static text is implemented using the internationalization framework as per Story 4.1.
- **Code Reuse**: The functionality for quotes is nearly identical to invoices. This is a prime opportunity for abstraction and code reuse. Create generic, reusable services on the backend (e.g., a `DocumentService`) and components on the frontend (e.g., a `DocumentEditor` or `DocumentView`) that can be configured for either "invoice" or "quote" mode. This will significantly reduce code duplication and maintenance overhead.
- **Numbering Scheme**: The quote numbering sequence must be managed independently of the invoice numbering sequence for each supplier.

### Testing
- Integration tests for all quote API endpoints are required.
- If reusable components are created, they must be tested to ensure they function correctly for both "invoice" and "quote" modes.
- An E2E test should cover the full quote lifecycle: creating, viewing, and downloading a quote PDF.

## Change Log
| Date       | Version | Description                | Author |
| :--------- | :------ | :------------------------- | :----- |
| 2025-08-29 | 1.0     | Initial draft              | Sarah  |

---
## Dev Agent Record
*(This section is to be filled out by the Dev Agent during implementation)*

#### Agent Model Used

#### Debug Log References

#### Completion Notes List

#### File List

---
## QA Results
*(This section is to be filled out by the QA Agent after development)*
